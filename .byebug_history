c
`
user.account_balance + new
new = Money.new(attribute.to_i, "USD")
attribute.to_i
input
user.account_balance
user
current_balance
c
current_user
c
attribute
current_user
current_balance
c
n
current_user
n
current_user
@user
q
current_user
c
q
@user
c
@user
c
n
flash[:notice]
flash
c
exit
OwnedByUser.create_or_update(@user, @listing)
OwnedByUser.find_user(@user, @listing)
@user.buy_stock(@trade)
@listing
@user.stocks
n
@user
exit
user
exit
params[:id]
stock.id
stick.id
q
@user
exit
total
c
total
c
seller
c
balance
seller
c
seller
c
trade.listing.seller.account_balance
sold
c
self.purchase_price
trade.itself
trade.self
trade
c
self
self.trade_id
self.id
self.user_id
trade.count
trade
c
self.stock_id
self
trade.first
Trade.first
trade
xtrade
exit
trade
exit
trade.all
trade
trade.listing_id
trade
exit
self
trade
trade[:stock_id]
trade.stock_id
trade
exit
self
trade
exit
stocks.update(stock.id, amount: updated)
stock
exit
stock.class
stock.amount.class
trade.num_of_stocks.class
trade.num_of_stocks
stock.class.class
stock
stock.class
exit
trade.stock_id
trade.stockz-id
stock_id
stock
exit
stock
updated
exit
stock
stock.amount += trade.num_of_stocks
stock.amount
stock
exit
@trade
params
exit
params
@trade
@listing
exit
listing_id
@listing
